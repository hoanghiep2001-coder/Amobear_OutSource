{"version":3,"sources":["assets\\scripts\\Combo.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAmC,yBAAY;IAA/C;QAAA,qEA+CC;QAnCS,WAAK,GAAW,CAAC,CAAC,CAAC;QAC3B,+BAA+B;QACvB,kBAAY,GAAW,CAAC,CAAC;QACjC,uCAAuC;QAC/B,uBAAiB,GAAW,CAAC,CAAC;;IA+BxC,CAAC;IA7BC,2BAAW,GAAX;QAAA,iBASC;QARC,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,YAAY,CAAC;YAChB,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAC3C,CAAC,EAAE,GAAG,CAAC,CAAC;QACR,yCAAyC;QACzC,8CAA8C;QAC9C,mDAAmD;QACnD,yDAAyD;IAC3D,CAAC;IACD,yBAAS,GAAT;QACE,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;IAC7B,CAAC;IAED,sBAAM,GAAN,UAAO,EAAE;QACP,IAAI,IAAI,CAAC,iBAAiB,GAAG,CAAC,EAAE;YAC9B,uCAAuC;YACvC,IAAI,CAAC,iBAAiB,IAAI,EAAE,CAAC;YAC7B,IAAI,IAAI,CAAC,iBAAiB,IAAI,CAAC,EAAE;gBAC/B,yCAAyC;gBACzC,IAAI,CAAC,SAAS,EAAE,CAAC;gBACjB,OAAO;aACR;YACD,0BAA0B;YAC1B,IAAI,CAAC,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,YAAY,CAAC;SAChE;IACH,CAAC;IA5CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;2CACA;IAElB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACG;IAGrB;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;sCACL;IAGpB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;6CACE;IAVF,KAAK;QADzB,OAAO;OACa,KAAK,CA+CzB;IAAD,YAAC;CA/CD,AA+CC,CA/CkC,EAAE,CAAC,SAAS,GA+C9C;kBA/CoB,KAAK","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Combo extends cc.Component {\r\n  @property(cc.Node)\r\n  comboBar: cc.Node;\r\n  @property(cc.Node)\r\n  comboEffect: cc.Node;\r\n\r\n  @property(cc.ProgressBar)\r\n  bar: cc.ProgressBar;\r\n\r\n  @property(cc.Label)\r\n  comboLabel: cc.Label;\r\n\r\n  private combo: number = -2;\r\n  // Cooldown duration in seconds\r\n  private cooldownTime: number = 5;\r\n  // Variable to track remaining cooldown\r\n  private remainingCooldown: number = 0;\r\n\r\n  updateCombo() {\r\n    this.combo++;\r\n    this.scheduleOnce(() => {\r\n      this.comboEffect.active = this.combo > 0;\r\n    }, 0.6);\r\n    // this.comboBar.active = this.combo > 0;\r\n    // this.remainingCooldown = this.cooldownTime;\r\n    // this.comboLabel.string = \"COMBO X\" + this.combo;\r\n    // Optional: You might want to disable combo actions here\r\n  }\r\n  stopCombo() {\r\n    this.comboBar.active = false;\r\n    this.combo = 0;\r\n    this.remainingCooldown = 0;\r\n  }\r\n\r\n  update(dt) {\r\n    if (this.remainingCooldown > 0) {\r\n      // Decrease the remaining cooldown time\r\n      this.remainingCooldown -= dt;\r\n      if (this.remainingCooldown <= 0) {\r\n        // Optional: Re-enable combo actions here\r\n        this.stopCombo();\r\n        return;\r\n      }\r\n      // Update the progress bar\r\n      this.bar.progress = this.remainingCooldown / this.cooldownTime;\r\n    }\r\n  }\r\n}\r\n"]}