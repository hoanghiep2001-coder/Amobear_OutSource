{"version":3,"sources":["assets\\scripts\\gameplay\\Slot.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AACA,iCAA4B;AAEtB,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;QAAA,qEAoDC;QAhDQ,UAAI,GAAS,IAAI,CAAC;;IAgD3B,CAAC;IA5CW,qBAAM,GAAhB;QACE,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,IAAI,EAAE;YAC7B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,eAAK,CAAC,CAAC;YAClD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC;SAC1C;IACH,CAAC;IAED,8BAAe,GAAf,UAAgB,IAAU,EAAE,MAAe;QACzC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACnB,IAAI,IAAI,CAAC,OAAO,EAAE;YAAE,OAAO;QAC3B,IAAM,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,qBAAqB,CACpD,IAAI,CAAC,IAAI;aACN,WAAW,EAAE,CACjB,CAAC;QACF,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,oBAAoB,CAAC,OAAO,CAAC,CAAC,CAAC;IACnE,CAAC;IACD,sBAAO,GAAP,UAAQ,IAAU;QAChB,IAAI,IAAI,KAAK,IAAI,EAAE;YACjB,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;SAClC;aAAM;YACL,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;SACzC;QACD,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,mCAAmC;IACrC,CAAC;IACD,uBAAQ,GAAR;QACE,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACrB,CAAC;IACD,sBAAO,GAAP;QACE,OAAO,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC;IAC5B,CAAC;IACD,yBAAU,GAAV;QACE,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI;YAAE,OAAO;QAChC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;IAC9B,CAAC;IACD,yBAAU,GAAV;QACE,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;QAErB,IAAI,IAAI,CAAC,KAAK,KAAK,IAAI;YAAE,OAAO;QAChC,wBAAwB;QAExB,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC;IAC1B,CAAC;IAjDD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;oCACE;IAFH,IAAI;QADxB,OAAO;OACa,IAAI,CAoDxB;IAAD,WAAC;CApDD,AAoDC,CApDiC,EAAE,CAAC,SAAS,GAoD7C;kBApDoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import Item from \"./Item\";\r\nimport Shelf from \"./Shelf\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Slot extends cc.Component {\r\n  @property(cc.Sprite)\r\n  private bg: cc.Sprite;\r\n\r\n  public item: Item = null;\r\n  public index: number;\r\n  private shelf: Shelf;\r\n\r\n  protected onLoad(): void {\r\n    if (this.node.parent !== null) {\r\n      this.shelf = this.node.parent.getComponent(Shelf);\r\n      this.index = this.node.getSiblingIndex();\r\n    }\r\n  }\r\n\r\n  setItemRightPos(item: Item, parent: cc.Node) {\r\n    this.setItem(item);\r\n    if (this.isEmpty()) return;\r\n    const tempPos = this.node.parent.convertToWorldSpaceAR(\r\n      this.node\r\n        .getPosition()\r\n    );\r\n    this.item.node.setParent(parent);\r\n    this.item.node.setPosition(parent.convertToNodeSpaceAR(tempPos));\r\n  }\r\n  setItem(item: Item) {\r\n    if (item === null) {\r\n      this.shelf.removeItem(this.item);\r\n    } else {\r\n      this.shelf.replaceItem(this.item, item);\r\n    }\r\n    this.item = item;\r\n    // this.bg.enabled = item === null;\r\n  }\r\n  setEmpty() {\r\n    this.setItem(null);\r\n  }\r\n  isEmpty() {\r\n    return this.item === null;\r\n  }\r\n  checkShelf() {\r\n    if (this.shelf === null) return;\r\n    this.shelf.checkBackLayer();\r\n  }\r\n  checkMatch() {\r\n    console.log(\"Check\");\r\n    \r\n    if (this.shelf === null) return;\r\n    // console.log(\"Check\");\r\n    \r\n    this.shelf.checkMatch();\r\n  }\r\n}\r\n"]}