{"version":3,"sources":["assets\\scripts\\Component\\ProgressBar.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import { ConfigData } from \"../config/GameConfig\";\r\nimport { DefaultSoundTrack, SoundController } from \"../Controller/SoundController\";\r\n\r\nconst { ccclass, property, menu } = cc._decorator;\r\n\r\n@ccclass\r\n@menu('Component/ProgressBar')\r\nexport class ProgressBar extends cc.Component {\r\n\r\n    static _instance: ProgressBar | null = null;\r\n    static get Instance(): ProgressBar {\r\n        if (this._instance == null) {\r\n            this._instance = cc.director\r\n                .getScene()\r\n                ?.getComponentInChildren(ProgressBar) as ProgressBar;\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    @property(cc.Sprite)\r\n    ProgressSprite: cc.Sprite = null;\r\n\r\n    @property([cc.Node])\r\n    fxs: cc.Node[] = [];\r\n\r\n\r\n    protected start(): void {\r\n\r\n    }\r\n\r\n    _fillRange: number = 0;\r\n    _fillTimes: number = 0;\r\n    public fillRangeProgress(): void {\r\n        this._fillRange += 0.3333;\r\n        cc.tween(this.ProgressSprite)\r\n            .to(0.2, { fillRange: this._fillRange }, { easing: cc.easing.sineIn })\r\n            .call(() => {\r\n                console.log(\"fill progress\");\r\n                if (this._fillTimes < 2) {\r\n                    const fx = this.fxs[this._fillTimes];\r\n                    this.activeFX(fx);\r\n                }\r\n                this._fillTimes += 1;\r\n                if (this._fillRange >= 0.9) {\r\n                    ConfigData.Game.isWin = true;\r\n                    SoundController.Instance(SoundController).playDefaultSound(DefaultSoundTrack.WinSound);\r\n                }\r\n            })\r\n            .start();\r\n    }\r\n\r\n\r\n    private activeFX(fx: cc.Node): void {\r\n        fx.active = true;\r\n        const circle = fx.children[0];\r\n        const star = fx.children[1];\r\n        \r\n        cc.tween(star)\r\n        .to(0.25, { scale: 1.3, opacity: 255 }, { easing: cc.easing.elasticOut })\r\n        .to(0.25, { scale: 0, opacity: 0 }, { easing: cc.easing.elasticIn })\r\n        .start();\r\n  \r\n        cc.tween(circle)\r\n        .to(0.25, { opacity: 255, scale: 1 }, { easing: cc.easing.elasticOut })\r\n        .to(0.25, { opacity: 0, scale: 1.5 }, { easing: cc.easing.sineIn })\r\n        .start();\r\n    }\r\n\r\n}\r\n"]}