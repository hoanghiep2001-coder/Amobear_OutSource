window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}c=a}var p=o[c]={exports:{}};e[c][0].call(p.exports,function(t){return i(e[c][1][t]||t)},p,p.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AdsManager:[function(t,e,o){"use strict";cc._RF.push(e,"90e40BwGAFK96eVWqu9Fh9X","AdsManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.AdsManager=void 0;var c=t("./Controller/SoundController"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.SoundController=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){window.gameReady&&window.gameReady()},e.prototype.installHandle=function(){if(alert("install"),this.SoundController.stopAllSound(),window.gameEnd&&window.gameEnd(),"undefined"==typeof playableSDK)if("undefined"==typeof ExitApi){if("undefined"==typeof dapi)return"undefined"!=typeof mraid?cc.sys.os==cc.sys.OS_ANDROID||cc.sys.os==cc.sys.ANDROID?void mraid.open("https://play.google.com/store/apps/details?id=com.goods.tidy.challenge"):cc.sys.os==cc.sys.OS_IOS||cc.sys.os==cc.sys.IPHONE||cc.sys.os==cc.sys.IPAD?void mraid.open("https://itunes.apple.com/us/app/id6743524073?mt=8"):void mraid.open("https://play.google.com/store/apps/details?id=com.goods.tidy.challenge"):void(window.install&&window.install());dapi.openStoreUrl()}else ExitApi.exit();else window.playableSDK.openAppStore()},r([l(c.SoundController)],e.prototype,"SoundController",void 0),r([a],e)}(cc.Component);o.AdsManager=p,cc._RF.pop()},{"./Controller/SoundController":"SoundController"}],Board:[function(t,e,o){"use strict";cc._RF.push(e,"dbd55jsOPVAQpY/bd5se6yb","Board");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.BoardState=void 0;var c,s=t("./AdsManager"),a=t("./Combo"),l=t("./Component/ProgressBar"),p=t("./Controller/SoundController"),u=t("./Hand"),f=t("./config/Config"),d=t("./config/GameConfig"),h=t("./gameplay/Shelf"),y=cc._decorator,v=y.ccclass,g=y.property;y.executeInEditMode,function(t){t[t.Generating=0]="Generating",t[t.Playing=1]="Playing",t[t.Lock=2]="Lock"}(c=o.BoardState||(o.BoardState={}));var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.endCard=null,e.explosionFx=null,e.Config=null,e.progressBar=null,e.moveCount=0,e.matchCount=0,e.shelves=[],e.firstMatchId=-1,e.AdsManager=null,e._isCallCompleteGen=!1,e}var o;return i(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){var t;return null==this._instance&&(this._instance=null===(t=cc.director.getScene())||void 0===t?void 0:t.getComponentInChildren(o)),this._instance},enumerable:!1,configurable:!0}),e.prototype.start=function(){var t=this;this.shelves=[],this.generateLevel(),this.buttonOpenLink.node.on("click",function(){t.AdsManager.installHandle()},this),this.buttonOpenSmall.node.on("click",function(){t.AdsManager.installHandle()},this)},e.prototype.isLock=function(){return this.boardState==c.Lock},e.prototype.isGenerating=function(){return this.boardState==c.Generating},e.prototype.setBoardState=function(t){this.boardState=t},e.prototype.updateCombo=function(){},e.prototype.updateMatchCount=function(){this.matchCount++,this.matchCount>d.adConfig.matchTimeBeforeShowEndCard-1&&(this.endCard.active=!0,d.ConfigData.Game.isWin=!0)},e.prototype.createExplosionFx=function(t){var e=cc.instantiate(this.explosionFx);e.parent=this.node,e.setPosition(t),this.scheduleOnce(function(){e.active=!1},1.68)},e.prototype.generateLevel=function(){this.boardState=c.Generating,this.generateLayerShelves()},e.prototype.hideHand=function(){this.hand.node.active&&(this.hand.node.active=!1)},e.prototype.findHandStartPoint=function(){for(var t=0;t<this.shelves.length;t++)if(t%3==1)for(var e=0;e<this.shelves[t].slots.length;e++)if(!this.shelves[t].slots[e].isEmpty())return void this.hand.setStartItem(this.shelves[t].slots[e].item)},e.prototype.findHandEndPoint=function(){for(var t=0;t<this.shelves.length;t++)for(var e=0;e<this.shelves[t].slots.length;e++)if(this.shelves[t].slots[e].isEmpty())return void this.hand.setEndSlot(this.shelves[t].slots[e])},e.prototype.generateLayerShelves=function(){var t,e=this;this.shelfContainer.scale=.9,this.itemContainer.scale=.9;for(var o=this.shelfPrefab.data.getContentSize(),n=d.levelConfig.row,i=d.levelConfig.col,r=[],c=0;c<n;c++)for(var s=0;s<i;s++)r.push({i:c,j:s});for(var a=r.length-1;a>0;a--){var l=Math.floor(Math.random()*(a+1));t=[r[l],r[a]],r[a]=t[0],r[l]=t[1]}var p=function(t){for(var r=t,c=function(c){var s=c;u.scheduleOnce(function(){var a=cc.instantiate(e.shelfPrefab);e.shelfContainer.addChild(a);var l=e.startPos.getPosition().add(new cc.Vec2((o.width+d.layoutConfig.offsetX)*c,-(o.height+d.layoutConfig.offsetY)*t));a.setPosition(l);var p=a.getComponent(h.default);null!=p&&(0==c?p.setShelfType(h.ShelfType.Left):c==i-1?p.setShelfType(h.ShelfType.Right):p.setShelfType(h.ShelfType.Middle),p._Board=e,e.shelves.push(p)),a.setScale(0),cc.tween(a).to(.1,{scale:1}).call(function(){r==n-1&&s==i-1&&e.generateLayerItems()}).start()},.1*r+.05*s)},s=0;s<i;s++)c(s)},u=this;for(c=0;c<n;c++)p(c);this.scheduleOnce(function(){d.ConfigData.Game.isCanClick=!0},1.2)},e.prototype.randomEmpty=function(t){return Array(t).fill(6)},e.prototype.generateLayerItems=function(){var t=this,e=this.randomEmpty(d.levelConfig.numberLayer),o=d.levelConfig.row*d.levelConfig.col*d.levelConfig.numberLayer,n=3*Math.floor(o/d.levelConfig.numberItem),i=(3*o-n*d.levelConfig.numberItem)/3,r=[];o<=d.levelConfig.numberItem?r=new Array(o).fill(3):(r=new Array(d.levelConfig.numberItem)).fill(n);for(var c=0;c<i;c++)r[Math.floor(Math.random()*r.length)]+=3;for(var s=Math.floor(this.shelves.length/2)+1,a=function(o){var n=o;l.scheduleOnce(function(){var o=[];t.shelves.forEach(function(e,i){if(i==s&&0==n){var c=Math.floor(Math.random()*r.length);t.firstMatchId=c;for(var a=0;a<3;a++){var l=e.addItem(c,a,n,t.itemContainer,t,t.Config);a<2?r[c]--:(t.hand.setEndPosition(l.node.position),e.slots[a].setEmpty(),l.node.destroy())}}else for(a=0;a<3;a++){if(c=Math.floor(Math.random()*r.length),r[c]<=0||2==a&&e.testMatch(c,n)){for(var p=!1,u=c+1;u<r.length;u++)if(r[u]>0&&!e.testMatch(u,n)){c=u,p=!0;break}if(!p)for(var f=c-1;f>=0;f--)if(r[f]>0&&!e.testMatch(f,n)){c=f;break}}r[c]--,l=e.addItem(c,a,n,t.itemContainer,t,t.Config),o.push(l)}});for(var i=0;i<e[n]/3;i++){var c=Math.floor(Math.random()*o.length);if(r[o[c].id]+=3,0==n)o[c].currentSlot.setEmpty();else for(var a=0;a<t.shelves.length;a++)t.shelves[a].removeItem(o[c]);var l=2;for(a=0;a<o.length;a++)if(o[a].id==o[c].id&&o[c]!==o[a]){var p=o[a];if(0==n)p.currentSlot.setEmpty();else for(var u=0;u<t.shelves.length;u++)t.shelves[u].removeItem(p);if(p.node.destroy(),--l<=0)break}o[c].node.destroy()}if(0==n){var f=!1;t.shelves.forEach(function(e){e.slots.forEach(function(o,i){if(o.isEmpty()&&e!=t.shelves[s]&&!f){var r=e.addItem(t.firstMatchId,i,n,t.itemContainer,t,t.Config);t.hand.setStartItem(r),f=!0}})})}},.5*(d.levelConfig.numberLayer-1-n))},l=this,p=d.levelConfig.numberLayer-1;p>=0;p--)a(p)},e.prototype.shuffleArray=function(t){for(var e,o=t.length-1;o>0;o--){var n=Math.floor(Math.random()*(o+1));e=[t[n],t[o]],t[o]=e[0],t[n]=e[1]}return t},e.prototype.handleCompleteGenerate=function(){var t=this;this._isCallCompleteGen||(this.boardState=c.Playing,this._isCallCompleteGen=!0,this.shelfContainer.children.reverse().forEach(function(t,e){t.setSiblingIndex(e)}),cc.tween(this.shelfContainer).to(.25,{scale:1},{easing:"quadOut"}).start(),cc.tween(this.itemContainer).to(.25,{scale:1},{easing:"quadOut"}).call(function(){t.scheduleOnce(function(){t.hand.startMove(),!d.ConfigData.Game.isPlayedBgSound&&p.SoundController.Instance(p.SoundController).playDefaultSound(p.LoopedSoundTrack.bgSound),d.ConfigData.Game.isPlayedBgSound=!0,d.ConfigData.Game.isPlaying=!0},.5)}).start())},e.prototype.findFirstEmptySlot=function(){for(var t=0;t<this.shelves.length;t++)for(var e=0;e<this.shelves[t].slots.length;e++)if(this.shelves[t].slots[e].isEmpty())return this.shelves[t].slots[e];return null},e.prototype.hideItemsLayer=function(t){this.shelves.forEach(function(e){if(!(t>=e.layers.length)&&null!==e.layers[t]&&void 0!==e.layers[t])for(var o=0;o<e.layers[t].length;o++)null!==e.layers[t][o]&&void 0!==e.layers[t][o]&&(e.layers[t][o].node.active=!1)})},e._instance=null,r([g(u.default)],e.prototype,"hand",void 0),r([g(a.default)],e.prototype,"combo",void 0),r([g(cc.Camera)],e.prototype,"camera",void 0),r([g([cc.Prefab])],e.prototype,"shelfPrefab",void 0),r([g([cc.Node])],e.prototype,"startPos",void 0),r([g([cc.Node])],e.prototype,"shelfContainer",void 0),r([g([cc.Node])],e.prototype,"itemContainer",void 0),r([g(cc.Button)],e.prototype,"buttonOpenLink",void 0),r([g(cc.Button)],e.prototype,"buttonOpenSmall",void 0),r([g(cc.Node)],e.prototype,"endCard",void 0),r([g(cc.Prefab)],e.prototype,"explosionFx",void 0),r([g(f.default)],e.prototype,"Config",void 0),r([g(l.ProgressBar)],e.prototype,"progressBar",void 0),r([g(s.AdsManager)],e.prototype,"AdsManager",void 0),o=r([v],e)}(cc.Component);o.default=_,cc._RF.pop()},{"./AdsManager":"AdsManager","./Combo":"Combo","./Component/ProgressBar":"ProgressBar","./Controller/SoundController":"SoundController","./Hand":"Hand","./config/Config":"Config","./config/GameConfig":"GameConfig","./gameplay/Shelf":"Shelf"}],CollisionManager:[function(t,e,o){"use strict";cc._RF.push(e,"fe5daaJLUZJII2AqQMrSiJz","CollisionManager");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,cc.director),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){},e.prototype.onLoad=function(){a.getCollisionManager().enabled=!0},r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ComboEffect:[function(t,e,o){"use strict";cc._RF.push(e,"ae7b5Z81DlLEZ9r9hIjqDEF","ComboEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){cc.tween(this.node).delay(.7).to(1.5,{opacity:0}).start()},r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],Combo:[function(t,e,o){"use strict";cc._RF.push(e,"6aeebWfMF1DeKRgydKYHFLZ","Combo");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.combo=-2,e.cooldownTime=5,e.remainingCooldown=0,e}return i(e,t),e.prototype.updateCombo=function(){var t=this;this.combo++,this.scheduleOnce(function(){t.comboEffect.active=t.combo>0},.6)},e.prototype.stopCombo=function(){this.comboBar.active=!1,this.combo=0,this.remainingCooldown=0},e.prototype.update=function(t){if(this.remainingCooldown>0){if(this.remainingCooldown-=t,this.remainingCooldown<=0)return void this.stopCombo();this.bar.progress=this.remainingCooldown/this.cooldownTime}},r([a(cc.Node)],e.prototype,"comboBar",void 0),r([a(cc.Node)],e.prototype,"comboEffect",void 0),r([a(cc.ProgressBar)],e.prototype,"bar",void 0),r([a(cc.Label)],e.prototype,"comboLabel",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Config:[function(t,e,o){"use strict";cc._RF.push(e,"63518mv8qRB/au7YZOxeUpQ","Config");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./ItemConfig"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}var o;return i(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){var t;return null==this._instance&&(this._instance=null===(t=cc.director.getScene())||void 0===t?void 0:t.getComponentInChildren(o)),this._instance},enumerable:!1,configurable:!0}),e._instance=null,r([l([c.default])],e.prototype,"itemConfig",void 0),o=r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./ItemConfig":"ItemConfig"}],GameConfig:[function(t,e,o){"use strict";cc._RF.push(e,"7904cgh/K1K27W1cHf6o8Qe","GameConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.ConfigData=o.adConfig=o.animationConfig=o.layoutConfig=o.levelConfig=void 0,o.levelConfig={row:5,col:3,numberLayer:1,numberItem:15,initialEmptySlot:6},o.layoutConfig={marginTop:0,offsetX:-30,offsetY:-30,backItemOffsetY:6},o.animationConfig={toSlotDuration:.1,matchDuration:.15,spawnDuration:.3},o.adConfig={matchTimeBeforeShowEndCard:8};var n=function(){function t(){}return t.Game={isEnableSound:!0,isShowEndCard:!1,isCanClick:!1,isPlaying:!1,isPlayedBgSound:!1,isLoose:!1,isWin:!1,isMovedToNextLevel:!1,isHasTimeCount:!1,isHasCTA:!0},t.UI={isActiveWarning:!1},t.Idea={isShelfExplosionWhenHitRocket:!1,fakeRocketPoses:[],shelf:[],shelfExplosionCount:0,shelfEatenCount:0},t.Helper={maxRocketCanSpawn:4},t}();o.ConfigData=n,cc._RF.pop()},{}],GameController:[function(t,e,o){"use strict";cc._RF.push(e,"8f0fcvqdLtDC4pvgm7+2SDt","GameController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.GameController=void 0;var c=t("../config/GameConfig"),s=cc._decorator,a=s.ccclass,l=s.property,p=s.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Playable_Level_1=null,e.Playable_Level_2=null,e.currentLevel=null,e}return i(e,t),e.prototype.start=function(){this.createNewLevel()},e.prototype.createNewLevel=function(){this.currentLevel&&(this.currentLevel.active=!1,this.currentLevel.destroy());var t=null;t=c.ConfigData.Game.isMovedToNextLevel?cc.instantiate(this.Playable_Level_2):cc.instantiate(this.Playable_Level_1),this.currentLevel=t,t.parent=this.node,t.position=new cc.Vec3(0,0,0)},r([l(cc.Prefab)],e.prototype,"Playable_Level_1",void 0),r([l(cc.Prefab)],e.prototype,"Playable_Level_2",void 0),r([a,p("Controller/GameController")],e)}(cc.Component);o.GameController=u,cc._RF.pop()},{"../config/GameConfig":"GameConfig"}],Hand:[function(t,e,o){"use strict";cc._RF.push(e,"18398oync9Di7q0xYZioUT+","Hand");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.startItem=null,e.endSlot=null,e.endItem=null,e.endPosition=null,e}return i(e,t),e.prototype.startMove=function(){if(null!==this.startItem&&null!==this.endPosition){this.node.active=!0;var t=new cc.Vec3(80,-25,0);new cc.Vec2(30,-25),this.node.setParent(this.startItem.node.parent),this.node.setPosition(this.startItem.node.position.add(t)),cc.tween(this.node).repeatForever(cc.tween(this.node).delay(.4).to(1.2,{position:this.endPosition.add(t)}).then(cc.tween(this.node).to(0,{position:this.startItem.node.position.add(t)}))).start()}else this.node.active=!1},e.prototype.setStartItem=function(t){this.startItem=t},e.prototype.setEndSlot=function(t){null===this.endSlot&&(this.endSlot=t)},e.prototype.setEndItem=function(t){null===this.endItem&&(this.endItem=t)},e.prototype.setEndPosition=function(t){this.endPosition=t},e.prototype.start=function(){},r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],ItemConfig:[function(t,e,o){"use strict";cc._RF.push(e,"a4314WSE+5Ny76qMiGSICwb","ItemConfig");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemSprites=[],e}return i(e,t),e.prototype.getSprite=function(t){return this.itemSprites[t]},r([a([cc.Prefab])],e.prototype,"itemPrefab",void 0),r([a([cc.SpriteFrame])],e.prototype,"itemSprites",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Item:[function(t,e,o){"use strict";cc._RF.push(e,"434a8S51gJD1rix/9KwGVQ0","Item");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("../Board"),s=t("../config/GameConfig"),a=t("../Controller/SoundController"),l=t("./Slot"),p=cc._decorator,u=p.ccclass,f=p.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockColor=new cc.Color(87,87,87,255),e.initialTouchPos=null,e.isLock=!1,e.nearestSlot=null,e.touching=!1,e._isHasRocket=!1,e._Config=null,e._Board=null,e.touchOffset=new cc.Vec3(0,-50),e}return i(e,t),e.prototype.start=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this)},e.prototype.setLock=function(t){this.isLock=t},e.prototype.setActive=function(t){this.isLock=!t,this.node.color=t?cc.Color.WHITE:this.lockColor},e.prototype.setActiveAnimation=function(t){this.isLock=!t,t?cc.tween(this.node).to(.2,{color:cc.Color.WHITE}).start():cc.tween(this.node).to(.2,{color:this.lockColor}).start()},e.prototype.setSlot=function(t){this.currentSlot=t,this.setIndex(t.index)},e.prototype.setId=function(t){this.id=t,this.sprite.spriteFrame=this._Config.itemConfig.getSprite(t)},e.prototype.setIndex=function(t){this.index=t},e.prototype.match=function(){var t=this;this._Board.setBoardState(c.BoardState.Lock),cc.tween(this.node).delay(.2).to(s.animationConfig.matchDuration,{scale:0},{easing:"backIn"}).call(function(){t.node.destroy()}).start()},e.prototype.moveTo=function(t){var e=this;this._Board.setBoardState(c.BoardState.Lock),cc.tween(this.node).to(s.animationConfig.toSlotDuration,{position:new cc.Vec3(t.x,t.y,0)}).call(function(){e._Board.setBoardState(c.BoardState.Playing)}).start()},e.prototype.handleMoveToBehind=function(t,e){var o=this;this.node.scale=0,cc.tween(this.node).to(s.animationConfig.spawnDuration,{scale:.86},{easing:"backOut"}).to(s.animationConfig.spawnDuration,{position:new cc.Vec3(t.x,t.y,0)},{easing:"backIn"}).call(function(){e>0?o.setActiveAnimation(!1):o._Board.handleCompleteGenerate(),o._Board.hideItemsLayer(e+2)}).start()},e.prototype.onTouchStart=function(t){s.ConfigData.Game.isCanClick&&(this.isLock||this._Board.isLock()||this._Board.isGenerating()||(a.SoundController.Instance(a.SoundController).playPrefabSound(a.PrefabSoundTrack.tilePickedSound),this._Board.hideHand(),this.initialTouchPos=t.getLocation(),this.node.setSiblingIndex(this.node.parent.childrenCount),this.node.zIndex=0,this.touching=!0))},e.prototype.onTouchMove=function(t){if(s.ConfigData.Game.isCanClick&&!this.isLock&&!this._Board.isLock()&&this.touching){var e=t.getLocation(),o=this.node.parent.convertToNodeSpaceAR(e),n=new cc.Vec3(o.x,o.y,0);this.initialTouchPos||(this.initialTouchPos=new cc.Vec2(n.x,n.y),this.touchOffset=this.node.position.sub(n)),this.touchOffset||(this.touchOffset=cc.Vec3.ZERO),this.node.setPosition(n.add(this.touchOffset))}},e.prototype.onTouchEnd=function(){var t=this;if(s.ConfigData.Game.isCanClick&&!this.isLock&&!this._Board.isLock()&&this.touching){this.touching=!1,null===this.nearestSlot&&(this.nearestSlot=this.currentSlot);var e=this.nearestSlot.node.parent.convertToWorldSpaceAR(this.nearestSlot.node.position),o=this.node.parent.convertToNodeSpaceAR(e);this._Board.setBoardState(c.BoardState.Lock),cc.tween(this.node).to(s.animationConfig.toSlotDuration,{position:o}).call(function(){t.nearestSlot.setItem(t),console.log("check"),console.log(t.nearestSlot,t.currentSlot),t.currentSlot!==t.nearestSlot&&(console.log("check"),t.currentSlot.setEmpty(),t.currentSlot.checkShelf(),t.setSlot(t.nearestSlot),t.currentSlot.checkMatch()),t.scheduleOnce(function(){t._Board.setBoardState(c.BoardState.Playing)},.1)}).start()}},e.prototype.onCollisionEnter=function(t){0!=this.touching&&"slot"==t.node.group&&(console.log("check"),t.node.getComponent(l.default).isEmpty()&&(this.nearestSlot=t.node.getComponent(l.default)))},e.prototype.onCollisionExit=function(t){0!=this.touching&&"slot"==t.node.group&&(t.node.getComponent(l.default)!==this.nearestSlot&&null!==this.nearestSlot||(console.log("check"),this.nearestSlot=this.currentSlot))},e.prototype.onDestroy=function(){this._Board.isLock&&this._Board.setBoardState(c.BoardState.Playing)},r([f([cc.Sprite])],e.prototype,"sprite",void 0),r([f([cc.Color])],e.prototype,"lockColor",void 0),r([u],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Board":"Board","../Controller/SoundController":"SoundController","../config/GameConfig":"GameConfig","./Slot":"Slot"}],MatchEffect:[function(t,e,o){"use strict";cc._RF.push(e,"11c87Vq+19Pa58eUEttW5Fu","MatchEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.start=function(){cc.tween(this.star).to(.5,{opacity:0,position:new cc.Vec3(0,20,0),scale:1.2}).start(),cc.tween(this.star_2).to(.5,{scale:1.3},{easing:cc.easing.elasticOut}).to(.5,{scale:0,opacity:0},{easing:cc.easing.sineIn}).start(),cc.tween(this.circle).to(.25,{opacity:255,scale:1},{easing:cc.easing.elasticOut}).to(.25,{opacity:0,scale:1.5},{easing:cc.easing.sineIn}).start(),cc.tween(this.glow).to(1,{rotation:-360,opacity:0},{easing:"quadOut"}).start()},r([a(cc.Node)],e.prototype,"star",void 0),r([a(cc.Node)],e.prototype,"glow",void 0),r([a(cc.Node)],e.prototype,"star_2",void 0),r([a(cc.Node)],e.prototype,"circle",void 0),r([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],ProgressBar:[function(t,e,o){"use strict";cc._RF.push(e,"4f137DmDLJAz5N5aYgmgbny","ProgressBar");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ProgressBar=void 0;var c=t("../config/GameConfig"),s=t("../Controller/SoundController"),a=cc._decorator,l=a.ccclass,p=a.property,u=a.menu,f=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ProgressSprite=null,e.fxs=[],e._fillRange=0,e._fillTimes=0,e}var o;return i(e,t),o=e,Object.defineProperty(e,"Instance",{get:function(){var t;return null==this._instance&&(this._instance=null===(t=cc.director.getScene())||void 0===t?void 0:t.getComponentInChildren(o)),this._instance},enumerable:!1,configurable:!0}),e.prototype.start=function(){},e.prototype.fillRangeProgress=function(){var t=this;this._fillRange+=.3333,cc.tween(this.ProgressSprite).to(.2,{fillRange:this._fillRange},{easing:cc.easing.sineIn}).call(function(){if(console.log("fill progress"),t._fillTimes<2){var e=t.fxs[t._fillTimes];t.activeFX(e)}t._fillTimes+=1,t._fillRange>=.9&&(c.ConfigData.Game.isWin=!0,s.SoundController.Instance(s.SoundController).playDefaultSound(s.DefaultSoundTrack.WinSound))}).start()},e.prototype.activeFX=function(t){t.active=!0;var e=t.children[0],o=t.children[1];cc.tween(o).to(.25,{scale:1.3,opacity:255},{easing:cc.easing.elasticOut}).to(.25,{scale:0,opacity:0},{easing:cc.easing.elasticIn}).start(),cc.tween(e).to(.25,{opacity:255,scale:1},{easing:cc.easing.elasticOut}).to(.25,{opacity:0,scale:1.5},{easing:cc.easing.sineIn}).start()},e._instance=null,r([p(cc.Sprite)],e.prototype,"ProgressSprite",void 0),r([p([cc.Node])],e.prototype,"fxs",void 0),o=r([l,u("Component/ProgressBar")],e)}(cc.Component);o.ProgressBar=f,cc._RF.pop()},{"../Controller/SoundController":"SoundController","../config/GameConfig":"GameConfig"}],Responsive:[function(t,e,o){"use strict";cc._RF.push(e,"0242bp4Y59D5ZeiRI9h+FzU","Responsive");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Responsive=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overall=null,e.warning=null,e.device="",e.isRotate=!1,e.HORIZONTAL_IPX="horizontal_IPX",e.HORIZONTAL_TABLET="horizontal_Tablet",e.VERTICAL_IPX="vertical_IPX",e.VERTICAL_MOBILE="vertical_Mobile",e._timeCount=null,e}return i(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.handleRotate=function(){cc.view.getFrameSize().width>cc.view.getFrameSize().height?(this.isRotate=!0,this.setHorizontal()):(this.isRotate=!1,this.setVertical())},e.prototype.setHorizontal=function(){cc.view.getFrameSize().height/cc.view.getFrameSize().width<.65?this.setHorizontalForIpX():this.setHorizontalForTablet()},e.prototype.setHorizontalForIpX=function(){this.HORIZONTAL_IPX!==this.device&&(this.device=this.HORIZONTAL_IPX,this.overall.setScale(1,1),this._timeCount&&this._timeCount.setPosition(0,800),cc.view.getFrameSize().width/cc.view.getFrameSize().height>=2?this.warning.setScale(4.05,1.44):this.warning.setScale(.97*3.375,1.44))},e.prototype.setHorizontalForTablet=function(){this.HORIZONTAL_TABLET!==this.device&&(this.device=this.HORIZONTAL_TABLET,console.log("hor_tab"),this._timeCount&&this._timeCount.setPosition(0,800),this.overall.setScale(1,1),this.warning.setScale(.71*3.375,1.44))},e.prototype.setVertical=function(){cc.view.getFrameSize().width/cc.view.getFrameSize().height<.5?this.setIphoneX():this.setMobile()},e.prototype.setIphoneX=function(){this.VERTICAL_IPX!==this.device&&(this.device=this.VERTICAL_IPX,this._timeCount&&this._timeCount.setPosition(0,850),this.overall.setScale(.9,.9),this.warning.setScale(.28*3.375,1.6))},e.prototype.setMobile=function(){if(this.VERTICAL_MOBILE!==this.device)if(this.device=this.VERTICAL_MOBILE,this.overall.setScale(1,1),this._timeCount&&this._timeCount.setPosition(0,800),cc.view.getFrameSize().height/cc.view.getFrameSize().width>1.5){if(cc.view.getFrameSize().width/cc.view.getFrameSize().height>=.6&&cc.view.getFrameSize().width/cc.view.getFrameSize().height<.62)return void this.warning.setScale(.999,1.68);this.warning.setScale(.999,1.72)}else console.log("ver_tab"),this.warning.setScale(1.35,1.44)},e.prototype.setResObject=function(t){this._timeCount=t,this.device=""},e.prototype.update=function(){this.handleRotate()},r([a(cc.Node)],e.prototype,"overall",void 0),r([a(cc.Node)],e.prototype,"warning",void 0),r([s],e)}(cc.Component);o.Responsive=l,cc._RF.pop()},{}],Rocket:[function(t,e,o){"use strict";cc._RF.push(e,"a8ad9wlsalIAKJl/cKXe1jI","Rocket");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.Rocket=void 0;var c=t("../config/GameConfig"),s=cc._decorator,a=s.ccclass,l=s.property,p=s.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bubble=null,e.light_vfx=null,e._rocket=null,e._Board=null,e._tween=null,e}return i(e,t),e.prototype.start=function(){this._rocket=this.node.getChildByName("Rocket"),this.activeIdleAnim()},e.prototype.activeIdleAnim=function(){var t=this,e=cc.math.randomRange(1.2,2);this._tween=cc.tween(this._rocket).by(e,{y:22},{easing:cc.easing.sineInOut}).by(e,{y:-22},{easing:cc.easing.sineInOut}).call(function(){return t.activeIdleAnim()}).start()},e.prototype.activeRocket=function(){this.node.scale=.3,this.disableBubble(),this.activeVfx(),this._tween&&this._tween.stop(),c.ConfigData.Game.isCanClick=!1},e.prototype.lerpAngle=function(t,e,o){return t+((e-t+540)%360-180)*o},e.prototype.moveToAnother=function(t,e,o){var n=this,i=this.node.getPosition(),r=t.sub(i),s=Math.atan2(r.y,r.x)*(180/Math.PI)+180,a=this.node.angle,l=this.lerpAngle(a,s,1),p=r.mag(),u=.5+1*Math.min(1,Math.max(0,(p-100)/400)),f=new cc.Vec2(-r.y,r.x).normalize(),d=.68*p,h=i.add(r.mul(.5)).add(f.mul(d));e.isActive=!1,cc.tween(this.node).parallel(cc.tween().bezierTo(u,i,h,t),cc.tween().to(u,{angle:l})).call(function(){var t=n.node.parent.convertToNodeSpaceAR(n.node.parent.convertToWorldSpaceAR(n.node.getPosition()));if(n._Board.createExplosionFx(t),n.node.active=!1,e.node.active=!1,e.itemInShelfs.forEach(function(t){t.isValid&&(t.node.active=!1)}),c.ConfigData.Idea.shelfEatenCount+=1,n._Board.updateCombo(),o){c.ConfigData.Idea.shelfExplosionCount+=1;var i=n._Board.node.convertToNodeSpaceAR(n.node.parent.convertToWorldSpaceAR(n.node.position));n._Board.shelves.filter(function(t){return t.isActive}).length>0&&n._Board.create5Rockets(i,0,5)}}).start()},e.prototype.disableBubble=function(){this.bubble.active=!1},e.prototype.activeVfx=function(){this.light_vfx.node.active=!0},r([l(cc.Node)],e.prototype,"bubble",void 0),r([l(cc.ParticleSystem)],e.prototype,"light_vfx",void 0),r([a,p("Helper/Rocket")],e)}(cc.Component);o.Rocket=u,cc._RF.pop()},{"../config/GameConfig":"GameConfig"}],ScaleEffect:[function(t,e,o){"use strict";cc._RF.push(e,"c5b75gyUB9GMKmg7DduQ0Al","ScaleEffect");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ScaleEffect=void 0;var c=cc._decorator,s=c.ccclass,a=c.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.scaleSize=1.1,e}return i(e,t),e.prototype.start=function(){this.StartEffect()},e.prototype.StartEffect=function(){cc.tween(this.node).repeatForever(cc.tween().to(.5,{scale:1.35},{easing:"sineOut"}).then(cc.tween(this.node).to(.5,{scale:1.3},{easing:"sineOut"}))).start()},r([a],e.prototype,"scaleSize",void 0),r([s],e)}(cc.Component);o.ScaleEffect=l,cc._RF.pop()},{}],Shelf:[function(t,e,o){"use strict";cc._RF.push(e,"3ad77UEmdJI8qCQc8KWemOr","Shelf");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.ShelfType=void 0;var c,s=t("../Component/ProgressBar"),a=t("../config/GameConfig"),l=t("../Controller/SoundController"),p=t("./Item"),u=t("./Slot"),f=cc._decorator,d=f.ccclass,h=f.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.shelfSprites=[],e.slots=[],e.layers=[],e._Board=null,e._itemContainer=null,e}return i(e,t),e.prototype.onLoad=function(){this.sprite=this.getComponent(cc.Sprite)},e.prototype.start=function(){},e.prototype.initialize=function(){},e.prototype.addItem=function(t,e,o,n,i,r){var c=cc.instantiate(this.itemPrefab).getComponent(p.default);c._Board=i,c._Config=r,c.setId(t),null==this.layers[o]&&(this.layers[o]=[]),this.layers[o].push(c),this.node.addChild(c.node,-1*o);var s=c.node.parent.convertToWorldSpaceAR(this.slots[e].node.getPosition().add(new cc.Vec2(0,0))),l=c.node.parent.convertToWorldSpaceAR(this.slots[e].node.getPosition().add(new cc.Vec2(0,o*a.layoutConfig.backItemOffsetY))),u=n.convertToNodeSpaceAR(s);c.node.setParent(n),c.node.setPosition(u);var f=n.convertToNodeSpaceAR(l);return this._itemContainer=n,0==o&&(this.slots[e].setItem(c),c.setSlot(this.slots[e])),c.handleMoveToBehind(f,o),c.setIndex(e),c},e.prototype.setShelfType=function(t){switch(t){case c.Middle:this.sprite.spriteFrame=this.shelfSprites[0];break;case c.Left:this.sprite.spriteFrame=this.shelfSprites[1];break;case c.Right:this.sprite.spriteFrame=this.shelfSprites[2],this.node.scaleX=-1}},e.prototype.testMatch=function(t,e){return null!=this.layers[e]&&!(this.layers[e].length<2)&&this.layers[e][0].id==this.layers[e][1].id&&this.layers[e][0].id==t},e.prototype.checkMatch=function(){for(var t=0;t<this.slots.length;t++)if(this.slots[t].isEmpty())return!1;if(this.slots[0].item.id===this.slots[1].item.id&&this.slots[0].item.id===this.slots[2].item.id){var e=this._Board.node.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.position));for(t=0;t<this.slots.length;t++)this.removeItem(this.slots[t].item),this.slots[t].item.match(),this.slots[t].setEmpty();return this.createMatchFx(e),this.checkBackLayer(),s.ProgressBar.Instance.fillRangeProgress(),l.SoundController.Instance(l.SoundController).playPrefabSound(l.PrefabSoundTrack.tripleMatchSortSound),this._Board.updateMatchCount(),!0}return!1},e.prototype.changeParentRocket=function(){},e.prototype.createMatchFx=function(t){var e=cc.instantiate(this.matchPrefab);e.setParent(this._Board.node),e.setPosition(t)},e.prototype.checkBackLayer=function(){for(var t=!0,e=0;e<this.slots.length;e++)this.slots[e].isEmpty()||(t=!1);if(t){var o=0;for(e=0;e<this.layers.length;e++)if(this.layers[e].length>0){if(0==o)for(var n=0;n<this.layers[e].length;n++)null!=(i=this.layers[e][n])&&(i.setActive(!0),i.setSlot(this.slots[i.index]),this.slots[i.index].setItem(this.layers[e][n]));for(n=0;n<this.layers[e].length;n++){var i,r=n;if(null!=(i=this.layers[e][r])){i.node.active=o<2;var c=this.node.convertToWorldSpaceAR(this.slots[i.index].node.getPosition().add(new cc.Vec2(0,o*a.layoutConfig.backItemOffsetY))),s=i.node.parent.convertToNodeSpaceAR(c);i.moveTo(s)}}o++}}},e.prototype.replaceItem=function(t,e){for(var o=0;o<this.layers.length;o++)if(null!==this.layers[o]&&void 0!==this.layers[o])for(var n=0;n<this.layers[o].length;n++)if(this.layers[o][n]===t)return void(this.layers[o][n]=e)},e.prototype.removeItem=function(t){for(var e=0;e<this.layers.length;e++)if(null!==this.layers[e]&&void 0!==this.layers[e])for(var o=0;o<this.layers[e].length;o++)if(this.layers[e][o]===t)return void this.layers[e].splice(o,1)},r([h([cc.Prefab])],e.prototype,"itemPrefab",void 0),r([h([cc.Prefab])],e.prototype,"matchPrefab",void 0),r([h([cc.SpriteFrame])],e.prototype,"shelfSprites",void 0),r([h([u.default])],e.prototype,"slots",void 0),r([d],e)}(cc.Component);o.default=y,function(t){t[t.Middle=0]="Middle",t[t.Left=1]="Left",t[t.Right=2]="Right"}(c=o.ShelfType||(o.ShelfType={})),cc._RF.pop()},{"../Component/ProgressBar":"ProgressBar","../Controller/SoundController":"SoundController","../config/GameConfig":"GameConfig","./Item":"Item","./Slot":"Slot"}],Singleton:[function(t,e,o){"use strict";cc._RF.push(e,"441d656bHlMPpyDY1fpDC7F","Singleton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,a=(c.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.Instance=function(t){return null==this._instance&&(this._instance=new t),this._instance},e._instance=null,r([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],Slot:[function(t,e,o){"use strict";cc._RF.push(e,"2755eD+0aVPs7DEpl/8PslR","Slot");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0});var c=t("./Shelf"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.item=null,e}return i(e,t),e.prototype.onLoad=function(){null!==this.node.parent&&(this.shelf=this.node.parent.getComponent(c.default),this.index=this.node.getSiblingIndex())},e.prototype.setItemRightPos=function(t,e){if(this.setItem(t),!this.isEmpty()){var o=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());this.item.node.setParent(e),this.item.node.setPosition(e.convertToNodeSpaceAR(o))}},e.prototype.setItem=function(t){null===t?this.shelf.removeItem(this.item):this.shelf.replaceItem(this.item,t),this.item=t},e.prototype.setEmpty=function(){this.setItem(null)},e.prototype.isEmpty=function(){return null===this.item},e.prototype.checkShelf=function(){null!==this.shelf&&this.shelf.checkBackLayer()},e.prototype.checkMatch=function(){console.log("Check"),null!==this.shelf&&this.shelf.checkMatch()},r([l(cc.Sprite)],e.prototype,"bg",void 0),r([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Shelf":"Shelf"}],SoundController:[function(t,e,o){"use strict";cc._RF.push(e,"31c51BwOc1M+6aWPfxlVCEJ","SoundController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.SoundController=o.PrefabSoundTrack=o.LoopedSoundTrack=o.DefaultSoundTrack=void 0;var c,s,a,l=t("../config/GameConfig"),p=t("../utils/Singleton"),u=cc._decorator,f=u.ccclass,d=u.property;(function(t){t.LoseSound="LoseSound",t.WinSound="WinSound"})(c=o.DefaultSoundTrack||(o.DefaultSoundTrack={})),function(t){t.bgSound="bgSound"}(s=o.LoopedSoundTrack||(o.LoopedSoundTrack={})),function(t){t.tilePickedSound="tilePickedSound",t.onShelfSound="onShelfSound",t.tripleMatchSortSound="tripleMatchSortSound",t.clearSound="clearSound"}(a=o.PrefabSoundTrack||(o.PrefabSoundTrack={}));var h=function(t){function e(){var e=t.call(this)||this;return e.sounds=[],e.soundCooldown=.5,e.lastEatSoundTime=0,e.eatSoundCount=0,e.scheduledSounds=[],e.bgSound=null,e.LoseSound=null,e.WinSound=null,e.InstantiateSoundContainer=null,e.tilePickedSound=null,e.onShelfSound=null,e.tripleMatchSortSound=null,e.clearSound=null,o._instance=e,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){},e.prototype.start=function(){},e.prototype.playDefaultSound=function(t){if(l.ConfigData.Game.isEnableSound)switch(t){case c.LoseSound:this.LoseSound.play();break;case c.WinSound:this.WinSound.play();break;case s.bgSound:this.bgSound.play()}},e.prototype.playPrefabSound=function(t){l.ConfigData.Game.isEnableSound&&this._playSound(t)},e.prototype._playSound=function(t){var e=this,o=null;switch(t){case a.onShelfSound:o=cc.instantiate(this.onShelfSound);break;case a.tilePickedSound:o=cc.instantiate(this.tilePickedSound);break;case a.tripleMatchSortSound:o=cc.instantiate(this.tripleMatchSortSound);break;case a.clearSound:o=cc.instantiate(this.clearSound)}o.parent=this.InstantiateSoundContainer;var n=o.getComponent(cc.AudioSource),i=cc.audioEngine.play(n.clip,!1,n.volume);cc.audioEngine.setFinishCallback(i,function(){e.removeAudio(n)}),this.sounds.push(n)},e.prototype.removeAudio=function(t){t.destroy()},e.prototype.muteSound=function(t,e){this.sounds.find(function(e){return e.node.name===t}).volume=e?0:1},e.prototype.stopSound=function(t){switch(t){case c.LoseSound:this.LoseSound.stop();break;case c.WinSound:this.WinSound.stop();break;case s.bgSound:this.bgSound.stop()}},e.prototype.stopAllSound=function(){this.bgSound&&this.bgSound.stop(),this.LoseSound&&this.LoseSound.stop(),this.WinSound&&this.WinSound.stop()},r([d(cc.AudioSource)],e.prototype,"bgSound",void 0),r([d(cc.AudioSource)],e.prototype,"LoseSound",void 0),r([d(cc.AudioSource)],e.prototype,"WinSound",void 0),r([d(cc.Node)],e.prototype,"InstantiateSoundContainer",void 0),r([d(cc.Prefab)],e.prototype,"tilePickedSound",void 0),r([d(cc.Prefab)],e.prototype,"onShelfSound",void 0),r([d(cc.Prefab)],e.prototype,"tripleMatchSortSound",void 0),r([d(cc.Prefab)],e.prototype,"clearSound",void 0),o=r([f("SoundController")],e)}(p.default);o.SoundController=h,cc._RF.pop()},{"../config/GameConfig":"GameConfig","../utils/Singleton":"Singleton"}],TimeCount:[function(t,e,o){"use strict";cc._RF.push(e,"07195hY0adABKUOrChkM6cI","TimeCount");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.TimeCount=void 0;var c=t("../config/GameConfig"),s=cc._decorator,a=s.ccclass,l=s.property,p=s.menu,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timeCount=0,e.countdownLabel=null,e.timeLeft=0,e.progress=1,e._isActiveTimeCount=!1,e}return i(e,t),e.prototype.start=function(){this.progress=1,this.timeLeft=this.timeCount},e.prototype.activeTime=function(){this._isActiveTimeCount=!0,this.schedule(this.updateTimer,1)},e.prototype.updateTimer=function(){this.timeLeft>0?(this.timeLeft-=1,c.ConfigData.Game.isLoose,this.timeLeft<=9?(this.countdownLabel.node.color=cc.color(255,0,0,255),this.countdownLabel.string="00:0"+this.timeLeft,c.ConfigData.UI.isActiveWarning=!0):this.countdownLabel.string="00:"+this.timeLeft):(this.unschedule(this.updateTimer),this.countdownLabel.string="00:00",c.ConfigData.Game.isLoose=!0)},e.prototype.onDisable=function(){this.node.active=!1},e.prototype.onDestroy=function(){this.node.active=!1},e.prototype.update=function(){c.ConfigData.Game.isPlaying&&!this._isActiveTimeCount&&this.activeTime()},r([l(cc.Integer)],e.prototype,"timeCount",void 0),r([l(cc.Label)],e.prototype,"countdownLabel",void 0),r([a,p("Component/TimeCount")],e)}(cc.Component);o.TimeCount=u,cc._RF.pop()},{"../config/GameConfig":"GameConfig"}],UIController:[function(t,e,o){"use strict";cc._RF.push(e,"617423I8J9BdoAa1UyDwt6t","UIController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,r=arguments.length,c=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(c=(r<3?i(c):r>3?i(e,o,c):i(e,o))||c);return r>3&&c&&Object.defineProperty(e,o,c),c};Object.defineProperty(o,"__esModule",{value:!0}),o.UIController=void 0;var c=t("../Component/Responsive"),s=t("../Component/TimeCount"),a=t("../config/GameConfig"),l=t("./GameController"),p=cc._decorator,u=p.ccclass,f=p.property,d=p.menu,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Responsive=null,e.EndCard=null,e.TimeCountPrefab=null,e._tc=null,e.warning=null,e._isActivedWarning=!1,e}return i(e,t),e.prototype.init=function(){a.ConfigData.Helper.maxRocketCanSpawn=4,a.ConfigData.Idea.fakeRocketPoses=[],a.ConfigData.Idea.shelf=[],a.ConfigData.Idea.shelfEatenCount=0,a.ConfigData.Idea.shelfExplosionCount=0},e.prototype.start=function(){this.init(),a.ConfigData.Game.isHasTimeCount&&this.createTimeCount()},e.prototype.createTimeCount=function(){var t=cc.instantiate(this.TimeCountPrefab);t.parent=this.node,t.setPosition(0,0,0),this._tc=t.getComponent(s.TimeCount),this.Responsive.setResObject(t)},e.prototype.activeWarning=function(){this._isActivedWarning||(this._isActivedWarning=!0,this.warning.active=!0)},e.prototype.moveToNextScene=function(){this.init();var t=this.getRootNode(this.node);this.scheduleOnce(function(){t.getComponentInChildren(l.GameController).createNewLevel(),a.ConfigData.Game.isMovedToNextLevel=!0},1)},e.prototype.getRootNode=function(t){for(;t.parent;)t=t.parent;return t},e.prototype.showEndCard=function(){a.ConfigData.Game.isShowEndCard=!0,this.EndCard.active=!0},e.prototype.update=function(){a.ConfigData.Game.isShowEndCard||(a.ConfigData.Game.isWin&&!this.EndCard.active&&this.showEndCard(),a.ConfigData.Game.isHasTimeCount&&a.ConfigData.UI.isActiveWarning&&this.activeWarning(),a.ConfigData.Game.isMovedToNextLevel&&a.ConfigData.Idea.shelfEatenCount>=24&&!this.EndCard.active&&this.showEndCard(),!a.ConfigData.Game.isMovedToNextLevel&&a.ConfigData.Idea.shelfEatenCount>=24&&this.moveToNextScene(),a.ConfigData.Game.isLoose&&!this.EndCard.active&&(a.ConfigData.Game.isHasTimeCount&&(this._tc.node.active=!1),a.ConfigData.UI.isActiveWarning&&(this.warning.active=!1),this.showEndCard()))},r([f(c.Responsive)],e.prototype,"Responsive",void 0),r([f(cc.Node)],e.prototype,"EndCard",void 0),r([f(cc.Prefab)],e.prototype,"TimeCountPrefab",void 0),r([f(cc.Node)],e.prototype,"warning",void 0),r([u,d("Controller/UIController")],e)}(cc.Component);o.UIController=h,cc._RF.pop()},{"../Component/Responsive":"Responsive","../Component/TimeCount":"TimeCount","../config/GameConfig":"GameConfig","./GameController":"GameController"}]},{},["AdsManager","Board","CollisionManager","Combo","ComboEffect","ProgressBar","Responsive","Rocket","TimeCount","GameController","SoundController","UIController","Hand","ScaleEffect","Config","GameConfig","ItemConfig","MatchEffect","Item","Shelf","Slot","Singleton"]);